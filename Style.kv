#:import CardTransition kivy.uix.screenmanager.CardTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import Graph kivy_garden.graph

WindowManager:
    LoginScreen:
    CreateAccountScreen:
    MainScreen:
    GameScreen:

<LoginButtons>:
    userField: userField
    passwordField: passwordField
    loginButton: loginButton
    createAccountButton: createAccountButton
    loginFailed: loginFailed
    loginPassed:

    size_hint: None, None

    RelativeLayout:
        pos: self.parent.pos
        size: self.parent.size

        BoxLayout:
            canvas.before:
                Color:
                    rgba: app.hexToKivyColor("#ffffff",.8)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            size: self.parent.size
            orientation: "horizontal"

            spacing: 5

            Label:
                size_hint: .05, 1
                text: ""

            GridLayout:
                size_hint: .9, 1
                cols:1
                spacing: 7

                GridLayout:
                    cols: 1
                    size_hint: 1,.3
                    spacing:5

                    Label:
                        size_hint: 1, .1
                        text: ""

                    Label:
                        size_hint:1, .35
                        font_name: "Raleway-Regular.ttf"
                        text: "Rychlak International"
                        font_size:self.height
                        color: 0,0,0,1

                    Label:
                        size_hint: 1, .35
                        font_name: "Raleway-Regular.ttf"
                        text: "Companion App"
                        font_size: self.height
                        color: app.hexToKivyColor("#595959",1)

                    Label:
                        size_hint: 1, .2
                        text: ""

                TextInput:
                    id: userField
                    size_hint:1,.12
                    hint_text: "User"
                    multiline: False
                    background_normal: "White.png"
                    background_active: "White.png"
                    font_size: .5*self.height
                    cursor_color: 0,0,0,1
                    foreground_color: 0,0,0,1

                TextInput:
                    id: passwordField
                    size_hint:1,.12
                    hint_text: "Password"
                    multiline: False
                    password: True
                    font_size: .5*self.height
                    background_normal: "White.png"
                    background_active: "White.png"
                    cursor_color: 0,0,0,1
                    foreground_color: 0,0,0,1

                Label:
                    id: loginFailed
                    size_hint:1,.06
                    text: ""
                    color: app.hexToKivyColor("#ff0000",1)

                Button:
                    id: loginButton
                    size_hint:1,.10
                    font_size: .6*self.height
                    text: "Login"
                    background_normal: ""
                    background_color: app.hexToKivyColor("#008ae6",1)
                    on_release:
                        root.loginButtonPress()
                        app.root.transition =  CardTransition(direction = "left",mode = "push", duration = .3)
                        app.root.current = "MainScreen" if root.loginPassed else "LoginScreen"

                Button:
                    id: createAccountButton
                    size_hint:1,.10
                    font_size: .6*self.height
                    text: "Create Account"
                    background_normal: ""
                    background_color: app.hexToKivyColor("#008ae6",1)
                    on_release:
                        app.root.transition = CardTransition(direction = "up",mode = "push", duration = .3)
                        app.root.current = "CreateAccountScreen"

                Label:
                    size_hint:1,.1
                    text: ""

            Label:
                size_hint: .05, 1
                text: ""

<LoginBackground>:
    AnchorLayout:
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "LoginBackground.png"
        size: self.parent.size
        anchor_x: 'center'
        anchor_y: 'center'
        LoginButtons:
            size_hint: .8,.45

<LoginScreen>:
    name: "LoginScreen"
    FloatLayout:
        LoginBackground:
            center: 0.5, 0.5


<CreateAccountButtons>:
    userField: userField
    passwordField: passwordField
    confirmField: confirmField
    createFailed: createFailed

    size_hint: None, None

    RelativeLayout:
        pos: self.parent.pos
        size: self.parent.size

        BoxLayout:
            canvas.before:
                Color:
                    rgba: app.hexToKivyColor("#ffffff",.8)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            size: self.parent.size
            orientation: "horizontal"

            spacing: 5

            Label:
                size_hint: .05, 1
                text: ""

            GridLayout:
                size_hint: .9, 1
                cols:1
                spacing: 7

                GridLayout:
                    cols: 1
                    size_hint: 1,.22
                    spacing:10

                    Label:
                        size_hint: 1, .1
                        text: ""

                    Label:
                        size_hint:1, .7
                        font_name: "Raleway-Regular.ttf"
                        text: "New User"
                        font_size:self.height
                        color: 0,0,0,1

                    Label:
                        size_hint: 1, .2
                        text: ""

                TextInput:
                    id: userField
                    size_hint:1,.14
                    hint_text: "Username"
                    multiline: False
                    background_normal: "White.png"
                    background_active: "White.png"
                    font_size: .5*self.height
                    cursor_color: 0,0,0,1
                    foreground_color: 0,0,0,1

                TextInput:
                    id: passwordField
                    size_hint:1,.14
                    hint_text: "Password"
                    multiline: False
                    password: True
                    font_size: .5*self.height
                    background_normal: "White.png"
                    background_active: "White.png"
                    cursor_color: 0,0,0,1
                    foreground_color: 0,0,0,1

                TextInput:
                    id: confirmField
                    size_hint:1,.14
                    hint_text: "Confirm Password"
                    multiline: False
                    password: True
                    font_size: .5*self.height
                    background_normal: "White.png"
                    background_active: "White.png"
                    cursor_color: 0,0,0,1
                    foreground_color: 0,0,0,1

                Label:
                    id: createFailed
                    size_hint:1,.06
                    text: ""
                    color: 1,0,0,1

                Button:
                    size_hint:1,.11
                    font_size: .6*self.height
                    text: "Create"
                    background_normal: ""
                    background_color: app.hexToKivyColor("#008ae6",1)
                    on_release:
                        app.root.transition = CardTransition(direction = "down", mode = "pop", duration = .3)
                        app.root.current = root.createButtonPress()

                Button:
                    size_hint:1,.11
                    font_size: .6*self.height
                    text: "Cancel"
                    background_normal: ""
                    background_color: app.hexToKivyColor("#008ae6",1)
                    on_release:
                        app.root.transition = CardTransition(direction = "down", mode = "pop", duration = .3)
                        app.root.current = "LoginScreen"

                Label:
                    size_hint:1,.08
                    text: ""

            Label:
                size_hint: .05, 1
                text: ""




<CreateAccountBackground>:
    AnchorLayout:
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "CreateBackground.jpg"
        size: self.parent.size
        anchor_x: 'center'
        anchor_y: 'center'
        CreateAccountButtons:
            size_hint: .8,.45

<CreateAccountScreen>:
    name: "CreateAccountScreen"
    FloatLayout:
        CreateAccountBackground:



<MainButtons>:
    mainGraph: mainGraph

    size_hint: None, None

    RelativeLayout:
        pos: self.parent.pos
        size: self.parent.size

        BoxLayout:
            canvas.before:
                Color:
                    rgba: app.hexToKivyColor("#ffffff",.8)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            size: self.parent.size
            orientation: "vertical"

            BoxLayout:
                size_hint: 1,.05

                RoundedButton:
                    size_hint: .15, 1
                    font_size: .6*self.height
                    text: "X"
                    backgroundColor: app.hexToKivyColor("#008ae6",1)
                    border_radius: [9]

                Label:
                    size_hint: .85, 1
                    text: ""

            BoxLayout:
                orientation: "horizontal"

                spacing: 0

                Label:
                    size_hint: .05, 1
                    text: ""

                GridLayout:

                    cols: 1
                    size_hint: .9, 1
                    spacing:3

                    Label:
                        size_hint: 1, .03

                    Label:
                        size_hint: 1, .06
                        font_name: "Raleway-Regular.ttf"
                        text: "Rychlak International"
                        font_size: .8 * self.height
                        color: 0,0,0,1

                    Label:
                        size_hint: 1, .06
                        font_name: "Raleway-Regular.ttf"
                        text: "Companion App"
                        font_size: .7 * self.height
                        color: app.hexToKivyColor("#595959",1)

                    Label:
                        size_hint: 1,.01

                    BoxLayout:
                        size_hint: 1,.05
                        orientation: "horizontal"

                        Label:
                            size_hint: .44, 1
                            text: ""

                        Label:
                            size_hint: .35,1
                            color: app.hexToKivyColor("#595959",1)
                            text: "Previous Scores:"
                            font_size: .53 * self.height

                        Button:
                            size_hint: .1, 1
                            text: "5"
                            background_normal: ""
                            background_color: app.hexToKivyColor("#008ae6",1)
                            on_release:
                                root.graphButtons(1)

                        Label:
                            size_hint: .01,1
                            text: ""

                        Button:
                            size_hint: .1, 1
                            text: "10"
                            background_normal: ""
                            background_color: app.hexToKivyColor("#008ae6",1)
                            on_release:
                                root.graphButtons(2)


                    Graph:
                        id: mainGraph
                        size_hint: 1, .49

                    Label:
                        size_hint: 1, .01
                        text:""

                    Button:
                        size_hint: 1, .06
                        font_size: .6*self.height
                        text: "Statistics"
                        background_normal: ""
                        background_color: app.hexToKivyColor("#008ae6",1)

                    Button:
                        size_hint: 1, .06
                        font_size: .6*self.height
                        text: "Play Round"
                        background_normal: ""
                        background_color: app.hexToKivyColor("#008ae6",1)
                        on_release:
                            app.root.current = "GameScreen"

                    Label:
                        size_hint: 1, .06
                        text: ""

                Label:
                    size_hint: .05, 1
                    text: ""



<MainBackground>:
    AnchorLayout:
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "MainBackground.jpg"
        size: self.parent.size
        anchor_x: 'center'
        anchor_y: 'center'
        MainButtons:
            size_hint: .85,.8

<MainScreen>:
    name: "MainScreen"
    FloatLayout:
        MainBackground:



<GameButtons>:
    #holeData: holeData

    size_hint: None, None

    RelativeLayout:
        pos: self.parent.pos
        size: self.parent.size

        BoxLayout:
            canvas.before:
                Color:
                    rgba: app.hexToKivyColor("#ffffff",.8)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            size: self.parent.size
            orientation: "horizontal"

            Label:
                size_hint: .05, 1
                text: ""

            GridLayout:
                size_hint: .9, 1


            Label:
                size_hint: .05, 1
                text:""

<GameBackground>:
    AnchorLayout:
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "GameBackground.jpg"
        size: self.parent.size
        anchor_x: 'center'
        anchor_y: 'center'
        GameButtons:
            size_hint: .85,.8

<GameScreen>:
    name: "GameScreen"
    FloatLayout:
        GameBackground:



<RoundedButton@Button>:
    background_color: (0,0,0,0)
    background_normal: ""
    backgroundColor: (0,0,1,1)
    border_radius: [18]
    canvas.before:
        Color:
            rgba: self.backgroundColor
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: self.border_radius